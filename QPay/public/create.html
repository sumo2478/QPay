<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	
    <title>QPay Create Event</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  </head>
  
  <style type="text/css">
  	body{
    	margin-left:20px;
    	margin-right:20px;
		margin-top:20px;
   	}
	.center_div{
	    margin: 0 auto;
	    width:80%; /* value of your choice which suits your alignment */
	    float:center;
	}

	.center_header {
		text-align:center;
	}
  </style>

  <script type="text/javascript">

function submitClicked(){
	console.log("submit clicked");
    $.ajax({
      url: "https://api.parse.com/1/functions/create",
      type: 'POST',
      headers:{"X-Parse-Application-Id": "X8Un7SuZ4L9O23ouSltZGMyldLlzRQxqxtbZVVLc", "X-Parse-REST-API-Key": "xcWVe8K7Q9fpiybqkK52uOiYJ24SlwedCgyTPJsN"},
      data: {
        title: document.getElementById('title').value,
        description: document.getElementById('description').value,
        amount: document.getElementById('amount').value,
        username: document.getElementById('username').value,
        email: document.getElementById('email').value,
        password: document.getElementById('password').value
      },
      success: function(data){      	
        console.log(JSON.stringify(data));   
        var urlToRedirectTo = "item.html?code=" + data.result;
        window.location.replace(urlToRedirectTo);
      }
    })
    .done(function(msg){
      
    })
    .fail(function(msg){
      alert('form was not');
    });

    (function(window, location) {
        history.replaceState(null, document.title, location.pathname+"#!/stealingyourhistory");
        history.pushState(null, document.title, location.pathname);

        window.addEventListener("popstate", function() {
          if(location.hash === "#!/stealingyourhistory") {
                history.replaceState(null, document.title, location.pathname);
                setTimeout(function(){
                  location.replace("http://qpay.parseapp.com/create.html");
                },0);
          }
        }, false);
    }(window, location));
}

  </script>

  <body>    
	<div class="container center_div">
		<h1 class="center_header">QPay Create Event</h1>
	    <hr>
	    <div class="row center_div">
	        <div class="col-md-6 center_div">
	            <div class="form-group">
	                <label>Event Title</label>
	                <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
	                    <input type="text" class="form-control" name="" id="title" placeholder="event title" required>
	                </div>
	            </div>
	            <div class="form-group">
	                <label>Event Description</label>
	                <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-book"></span></span>
	                    <textarea id="description" class="form-control" rows="3" placeholder="event description"></textarea>
	                </div>
	            </div>
	            <div class="form-group">
	                <label>Amount (in dollars)</label>
	                <div class="input-group"> <span class="input-group-addon money"><span class="glyphicon-money">$</span></span>
	                    <input type="text" class="form-control" name="" id="amount" placeholder="amount in dollars" required>
	                </div>
	            </div>
	            <div class="form-group">
	                <label>Venmo Username</label>
	                <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
	                    <input type="text" class="form-control" name="" id="username" placeholder="username" required>
	                </div>
	            </div>
	            <div class="form-group">
	                <label>Email</label>
	                <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span></span>
	                    <input type="text" class="form-control" name="" id="email" placeholder="email" required>
	                </div>
	            </div>
	            <div class="form-group">
	                <label>Password</label>
	                <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span>
	                    <input type="text" class="form-control" name="password" id="password" placeholder="Password" required data-toggle="popover" title="Password Strength" data-content="Enter Password...">
	                </div>
	            </div>
	            <div class="form-group">
	            	<button name="button" id="button" class="btn btn-primary" onclick="submitClicked()">Submit</button>
	            </div>	            
	        </div>
	    </div>
	</div>

		
    </div>
	
    
  </body>
</html>